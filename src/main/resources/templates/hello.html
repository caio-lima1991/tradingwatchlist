<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Watchlist</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
	<script>
	// AJAX call for autocomplete 
	function buscaSymbols(){
		var url = "https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=" 
				+ $("#search-box").val()
				+ "&apikey=C4FVKFD0YFBXD1X7"
		$.ajax({
            url: url,
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
			beforeSend: function() {
				$("#search-box").css("background", "#FFF url(LoaderIcon.gif) no-repeat 165px");
			},
			success: function(data) {
				$("#suggesstion-box").show();
				$("#suggesstion-box").html(data);
				$("#search-box").css("background", "#FFF");
			},
            error: function (error) {
                
            }
        });
	}

	//To select a country name
	function selectCountry(val) {
		$("#search-box").val(val);
		$("#suggesstion-box").hide();
	}	
</script>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"
		th:fragment="header">
		<div class="container-fluid">
			<a class="navbar-brand" th:href="@{/}">Bem-vindo Ã  sua Watchlist do Mercado Financeiro</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
		</div>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item">
					<form th:action="@{/logout}" method="post">
						<button class="btn btn-dark btn-sm">Sair</button>
					</form>
				</li>
			</ul>
		</div>
	</nav>
</body>
<br>
<br>
<body>
	<div id="myDIV" class="header">
		<h2 style="margin: 5px">Meus ativos</h2>
		<input type="text" id="search-box"><button onclick="buscaSymbols()">Search</button>
		<div id="suggesstion-box"></div>
	</div>

	<ul id="myUL">
	</ul>
</body>
</html>